# Table

## Installation
`npm i @snack-ui/table`

[Changelog](./CHANGELOG.md)

## TODO:
  - resize columns
  - export data
  - loading state
  - multiple row selection with Shift key pressed
  - try to make the table independent of height


## Примечание
> Для оптимальной работы таблицы используйте `useMemo` для `columnDefinitions`
или выносите их определение за компонент

## Example

```typescript jsx
import { Table } from '@snack-ui/table';

// ...

type TableData = {
  id: string;
  firstName: string;
  lastName: string;
  age: number;
  status: string;
}

const columnDefinitions: ColumnDefinition<TableData>[] = [
  Table.getStatusColumnDef<Person>({
    accessorKey: 'status',
    mapStatusToAppearance: {
      pending: Table.statusAppearances.Blue,
      success: Table.statusAppearances.Green,
      // ... etc
    },
    header: 'Статус',
    renderDescription: (value: string) => t(translations.statuses[value]),
    size: 250,
  }),
  {
    accessorKey: 'id',
  },
  {
    // id, size - обязательны при передаче pinned
    id: 'firstName',
    size: 140,
    pinned: Table.columnPinPositions.Left,
    accessorKey: 'firstName',
    header: 'Имя',
    enableSorting: true,
    sortDescFirst: true,
  },
  {
    accessorKey: 'lastName',
    header: 'Фамилия',
    cell: ctx => <div className='custom'>{ctx.getValue<string>()}</div>,
    maxSize: 200,
    enableSorting: false,
  },
  {
    accessorKey: 'age',
    header: ctx => `Можно добавить хедер так: ${ctx.column.id}`,
    minSize: 40,
  },
  Table.getRowActionsColumnDef({
    pinned: true,
    actions: [
      {
        option: 'Действие с иконкой',
        icon: <PlaceholderSVG />,
        onClick: handleRowActionClick,
      },
      {
        option: 'Другое действие',
        onClick: handleRowActionClick,
      },
    ],
  })
];

// ...

<Table
  columnDefinitions={columnDefinitions}
  data={data}
  rowSelection={{
    enable: true, // false выключает выбор всех строк (состояние disabled)
    // или можно передать функцию для вычисления 
    // enable: row => !['Pending', 'Loading'].includes(row.original.status),
    onChange: handleRowSelection,
  }}
/>
```


[//]: DOCUMENTATION_SECTION_START
[//]: THIS_SECTION_IS_AUTOGENERATED_PLEASE_DONT_EDIT_IT
## Table
Компонент таблицы
### Props
| name | type | required | default value | description |
|------|------|----------|---------------|-------------|
| data | `TData[]` | true | - | Данные для отрисовки |
| columnDefinitions | `ColumnDefinition<TData>[]` | true | - | Определение внешнего вида и функционала колонок |
| sort | `{ state?: SortingState; onChange(state: SortingState): void; }` | false | - | Параметры не отвечают за возможность сортировки, их стоит использовать если нужно отслеживать состояние <br> <strong>state</strong>: Состояние сортировки для initial state (если initial state не нужен - можно вообще не передавать) <br> <strong>onChange</strong>: Колбэк на изменение сортировки |
| rowSelection | `{ enable: boolean &#124; ((row: Row<TData>) => boolean); onChange(state: RowSelectionState): void; multiRow?: boolean; }` | false | - | <strong>enable</strong>: Отвечает за доступность строк для выбора <br> <strong>onChange</strong>: Колбэк на выбор строк <br> <strong>multiRow</strong>: Мульти-выбор строк (включен по-умолчанию, когда включается выбор) |
| onRowClick | `RowClickHandler<TData>` | false | - | Колбэк клика по строке |
| className | `string` | false | - | CSS-класс |
## Table.getStatusColumnDef
Вспомогательная функция для создания ячейки со статусом
### Props
| name | type | required | default value | description |
|------|------|----------|---------------|-------------|
| accessorKey | `string` | true | - | Имя ключа соответствующее полю в data |
| mapStatusToAppearance | `Record<string, StatusAppearance>` | true | - | Маппинг значений статуса на цвета |
| enableSorting | `boolean` | false | - | Включение/выключение сортировки |
| renderDescription | `(cellValue: string) => string` | false | - | Функция для отрисовки текста, если не передана, то будет отрисован только индикатор статуса |
| size | `number` | false | - | Размер ячейки |
| header | `ColumnDefTemplate<HeaderContext<TData, unknown>> & (string &#124; ((ctx: HeaderContext<TData, unknown>) => string))` | false | - | Заголовок колонки |
## Table.getRowActionsColumnDef
Вспомогательная функция для создания ячейки с дополнительными действиями у строки
### Props
| name | type | required | default value | description |
|------|------|----------|---------------|-------------|
| actions | `RowActionProps<TData>[]` | true | - | Действия для строки |
| pinned | `boolean` | false | - | Закрепление колонки справа в таблице |


[//]: DOCUMENTATION_SECTION_END
