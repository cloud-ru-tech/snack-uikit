# Toolbar

## Installation
`npm i @snack-uikit/toolbar`

[Changelog](./CHANGELOG.md)

## Description

- Пакет `@snack-uikit/toolbar` предоставляет компонент `Toolbar` — универсальную панель инструментов для управления данными в таблицах, списках и других представлениях контента.
- Компонент объединяет в себе строку поиска, массовые действия для выбранных элементов, кнопку обновления, фильтры и дополнительные действия в единый интерфейс.
- Поддерживает два режима выбора: `single` (одиночный) и `multiple` (множественный) с чекбоксом и массовыми действиями (`bulkActions`), которые автоматически скрываются при отсутствии выбранных элементов.
- Включает строку поиска с возможностью загрузки (`loading`), обработчиками изменения значения и подтверждения поиска.
- Интегрирует систему фильтров через `filterRow` на базе `ChipChoiceRow`, позволяющую добавлять, удалять и управлять активными фильтрами с отображением их количества на кнопке фильтра.
- Предоставляет слот `after` для размещения произвольных React-компонентов в правой части тулбара и выпадающий список дополнительных действий (`moreActions`).
- Поддерживает сохранение состояния фильтров и поиска в `localStorage` и `queryParams` через конфигурацию `persist` для восстановления состояния при перезагрузке страницы.
- Может отображаться с внешним бордером (`outline`) для визуального отделения от контента.
- Figma: [`Toolbar`](https://www.figma.com/file/jtGxAPvFJOMir7V0eQFukN/Snack-UI-Kit-1.1.0?node-id=41%3A224846&mode=design).

## Example

```tsx
import { useState } from 'react';
import { Toolbar } from '@snack-uikit/toolbar';
import { ButtonFunction } from '@snack-uikit/button';
import { PlaceholderSVG } from '@snack-uikit/icons';

function Example() {
  const [searchValue, setSearchValue] = useState('');
  const [checked, setChecked] = useState(false);
  const [filtersValue, setFiltersValue] = useState<Record<string, unknown>>({});
  const [visibleFilters, setVisibleFilters] = useState<string[]>([]);

  const bulkActions = [
    {
      label: 'Confirm',
      icon: PlaceholderSVG,
      onClick: () => console.log('Confirm'),
      'data-test-id': 'confirm-action',
    },
    {
      label: 'Delete',
      icon: PlaceholderSVG,
      onClick: () => console.log('Delete'),
      'data-test-id': 'delete-action',
    },
  ];

  const moreActions = [
    {
      id: 'export',
      content: { option: 'Export' },
      onClick: () => console.log('Export'),
    },
    {
      id: 'import',
      content: { option: 'Import' },
      onClick: () => console.log('Import'),
    },
  ];

  const filterRow = {
    showAddButton: true,
    showClearButton: true,
    filters: [
      {
        id: 'status',
        label: 'Status',
        type: 'single',
        pinned: true,
        options: [
          { label: 'Active', value: 'active' },
          { label: 'Inactive', value: 'inactive' },
        ],
      },
    ],
    open: visibleFilters.length > 0,
    value: filtersValue,
    onChange: setFiltersValue,
    visibleFilters,
    onVisibleFiltersChange: setVisibleFilters,
  };

  return (
    <Toolbar
      search={{
        value: searchValue,
        onChange: setSearchValue,
        onSubmit: (value) => console.log('Search:', value),
        placeholder: 'Search',
      }}
      selectionMode="multiple"
      checked={checked}
      onCheck={() => setChecked(!checked)}
      bulkActions={bulkActions}
      onRefresh={() => console.log('Refresh')}
      moreActions={moreActions}
      filterRow={filterRow}
      after={
        <>
          <ButtonFunction icon={<PlaceholderSVG />} size="m" />
          <ButtonFunction icon={<PlaceholderSVG />} size="m" />
        </>
      }
      persist={{
        id: 'example-toolbar',
        filterQueryKey: 'filters',
        onLoad: ({ filter, search }) => {
          if (filter) setFiltersValue(filter);
          if (search) setSearchValue(search);
        },
      }}
    />
  );
}
```

[//]: DOCUMENTATION_SECTION_START
[//]: THIS_SECTION_IS_AUTOGENERATED_PLEASE_DONT_EDIT_IT
## formatFilterStateToRequestPayload
Вспомогательная функция для преобразования состояния тулбара к формату RequestPayloadParams
### Props
| name | type | default value | description |
|------|------|---------------|-------------|
| pagination | `PaginationParams` | - |  |
| ordering | `FieldSort[]` | - |  |
| search | `string` | - |  |
| filter | `FiltersState` | - |  |
## isDateString
Утилита для проверки значения на соответствие дате.
Поддерживает:
- ISO форматы: '2021-01-01T00:00:00Z', '2021-01-01T15:55:42.000Z'
- Форматы с точками: '12.03.2025', '12.03.2025 12:00'
- Частичные даты: '2026', '2026-01'
- Timestamps: '1768492519666', '-62167219200000'
- Временные зоны: '+03:00', '-05:00'
С полным списком поддерживаемых значений можно ознакомиться
в файле с unit тестами packages/toolbar/__tests__/isDateString.spec.ts
### Props
| name | type | default value | description |
|------|------|---------------|-------------|
## Toolbar
### Props
| name | type | default value | description |
|------|------|---------------|-------------|
| search | `{ value: string; onChange(value: string): void; onSubmit?(value: string): void; placeholder?: string; loading?: boolean; }` | - | Параметры отвечают за строку поиска <br> <strong>value</strong>: Значение строки поиска <br> <strong>onChange</strong>: Колбэк смены значения <br> <strong>onSubmit</strong>: Колбэк на подтверждение поиска по строке <strong>placeholder</strong>: Плейсхолдер <br> <strong>loading</strong>: Состояние загрузки <br> |
| className | `string` | - | Класснейм |
| outline | `boolean` | - | Внешний бордер |
| onCheck | `() => void` | - | Колбек смены значения чекбокса |
| checked | `boolean` | - | Значение чекбокса |
| indeterminate | `boolean` | - | Состояние частичного выбора |
| selectionMode | enum SelectionMode: `"single"`, `"multiple"` | 'multiple' | Режим выбора |
| bulkActions | `BulkAction[]` | - | Список массовых действий |
| onRefresh | `() => void` | - | Колбек обновления |
| after | `ReactNode` | - | Дополнительный слот в конце тулбара |
| moreActions | `Action[]` | - | Элементы выпадающего списка кнопки с действиями |
| filterRow | `FilterRow<TState>` | - |  |
| persist | `ToolbarPersistConfig<TState>` | - | Конфиг для сохранения состояния в localStorage и queryParams. <br> Поле id должно быть уникальным для каждого инстанса компонента. <br> |


[//]: DOCUMENTATION_SECTION_END
